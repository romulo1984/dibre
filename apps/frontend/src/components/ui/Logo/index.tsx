import { useId } from 'react'
import { cn } from '@/lib/utils'

const VIEWBOX_WIDTH = 607
const VIEWBOX_HEIGHT = 166
const ASPECT_RATIO = VIEWBOX_WIDTH / VIEWBOX_HEIGHT

export interface LogoProps {
  /** Cor principal (texto/marcas). Default: #374C59 */
  primaryColor?: string
  /** Cor de destaque (ponto). Default: #F3BC12 */
  accentColor?: string
  /** Altura do logo em pixels. Largura derivada pela proporção. Default: 32 */
  height?: number
  /** Largura fixa (opcional). Se não informado, usa height e proporção. */
  width?: number
  /** Animação sutil (fade-in + leve brilho no ponto). Default: true */
  animate?: boolean
  /** Classe do container (ex.: tamanho responsivo). */
  className?: string
  /** Atributos nativos do SVG (aria-hidden, etc.). */
  ['aria-label']?: string
}

const DEFAULT_PRIMARY = '#374C59'
const DEFAULT_ACCENT = '#F3BC12'
const DEFAULT_HEIGHT = 32

export function Logo({
  primaryColor = DEFAULT_PRIMARY,
  accentColor = DEFAULT_ACCENT,
  height = DEFAULT_HEIGHT,
  width,
  animate = true,
  className,
  'aria-label': ariaLabel,
}: LogoProps) {
  const clipId = useId().replace(/:/g, '-')
  const w = width ?? Math.round(height * ASPECT_RATIO)
  const h = height

  return (
    <svg
      width={w}
      height={h}
      viewBox={`0 0 ${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT}`}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={cn(
        'shrink-0 transition-opacity duration-500',
        animate && 'animate-in fade-in fill-mode-backwards',
        className,
      )}
      style={animate ? { animationDuration: '500ms' } : undefined}
      aria-label={ariaLabel}
      aria-hidden={!ariaLabel}
    >
      <defs>
        <clipPath id={clipId}>
          <rect width="606.86" height="165.642" fill="white" />
        </clipPath>
      </defs>
      <g clipPath={`url(#${clipId})`}>
        <path
          d="M407.108 163.058V59.9283C423.082 54.4469 439.213 51.7061 455.501 51.7061C460.513 51.7061 465.29 51.9411 469.831 52.4109C474.373 52.7241 479.385 53.5072 484.866 54.7601L481.343 71.9093C476.331 70.4997 471.867 69.6384 467.952 69.3252C464.193 68.8553 460.043 68.6204 455.501 68.6204C445.948 68.6204 436.238 69.9516 426.371 72.614V163.058H407.108Z"
          fill={primaryColor}
        />
        <path
          d="M29.365 107.147C29.365 117.014 31.1661 125.08 34.7682 131.344C38.5269 137.609 44.4782 140.741 52.6221 140.741C54.9713 140.741 57.1639 140.663 59.1999 140.506C61.2359 140.349 63.3502 140.114 65.5428 139.801V79.6615C63.3502 78.4086 60.8444 77.3906 58.0253 76.6075C55.2063 75.6678 52.2306 75.198 49.0983 75.198C42.2073 75.198 37.1957 77.9387 34.0634 83.4202C30.9312 88.9017 29.365 96.8106 29.365 107.147V107.147ZM94.438 159.769C89.1131 161.492 82.6136 162.902 74.9396 163.998C67.2655 165.094 59.7481 165.642 52.3872 165.642C35.1597 165.642 22.0825 160.553 13.1556 150.373C4.38518 140.193 0 126.254 0 108.557C0 90.5463 3.68042 76.3728 11.0412 66.0362C18.5587 55.5431 29.6 50.2966 44.165 50.2966C48.0804 50.2966 51.9174 50.7664 55.6761 51.7061C59.4348 52.4892 62.7237 53.6638 65.5428 55.2299V4.957L94.438 0.0236588V159.769Z"
          fill={primaryColor}
        />
        <path
          d="M366.944 165.642C375.426 165.642 382.301 158.767 382.301 150.285C382.301 141.804 375.426 134.928 366.944 134.928C358.463 134.928 351.587 141.804 351.587 150.285C351.587 158.767 358.463 165.642 366.944 165.642Z"
          fill={accentColor}
          className={animate ? 'logo-dot-glow' : undefined}
        />
        <path
          d="M271.789 0L242.894 4.93357V159.746C248.219 161.469 254.796 162.878 262.627 163.975C270.457 165.071 278.133 165.619 285.65 165.619C294.107 165.619 301.625 164.287 308.203 161.625C314.781 158.806 320.339 154.89 324.881 149.879C325.653 149.027 326.383 148.136 327.092 147.225C309.741 141.387 291.219 139.353 271.789 142.049V139.543V119.93V79.6387C273.981 78.3857 276.567 77.367 279.543 76.584C282.675 75.6443 285.807 75.1758 288.939 75.1758C295.83 75.1758 300.92 77.915 304.209 83.3965C307.654 88.8779 309.377 96.7885 309.377 107.125C309.377 112.058 309.012 116.406 308.297 120.189C317.978 121.459 327.396 123.663 336.66 126.635C338.044 120.826 338.742 114.56 338.742 107.828C338.742 99.2143 337.803 91.3835 335.924 84.3359C334.044 77.2883 331.223 71.2597 327.465 66.248C323.862 61.0798 319.321 57.1644 313.84 54.5019C308.358 51.6829 302.016 50.2734 294.812 50.2734C291.053 50.2734 287.294 50.6642 283.535 51.4473C279.776 52.0737 275.861 53.3277 271.789 55.207V0Z"
          fill={primaryColor}
        />
        <path
          d="M177.585 20.8563C177.585 26.4944 175.784 30.9579 172.182 34.2468C168.58 37.5357 164.273 39.1801 159.261 39.1801C154.25 39.1801 149.943 37.5357 146.341 34.2468C142.895 30.9579 141.173 26.4944 141.173 20.8563C141.173 15.0616 142.895 10.5198 146.341 7.23092C149.943 3.94205 154.25 2.29762 159.261 2.29762C164.273 2.29762 168.58 3.94205 172.182 7.23092C175.784 10.5198 177.585 15.0616 177.585 20.8563V20.8563ZM220.576 158.285C214.624 161.104 208.986 162.983 203.661 163.923C198.493 165.019 193.716 165.567 189.331 165.567C181.814 165.567 175.471 164.471 170.303 162.278C165.291 160.086 161.219 156.953 158.087 152.882C155.111 148.653 152.997 143.563 151.744 137.612C150.491 131.66 149.865 124.848 149.865 117.174V76.5324H119.325V52.5705H178.76V120.932C178.76 127.51 179.934 132.443 182.284 135.732C184.789 138.865 188.861 140.431 194.5 140.431C197.162 140.431 200.373 140.117 204.131 139.491C207.89 138.708 215.877 135.345 220.576 133.153L220.576 158.285Z"
          fill={primaryColor}
        />
        <path
          d="M560.816 51.4712C575.538 51.4712 586.892 56.0913 594.879 65.3315C602.867 74.4151 606.86 88.2754 606.86 106.912V113.725H528.867C529.65 125.001 533.33 133.615 539.908 139.566C546.643 145.361 556.039 148.258 568.099 148.258C574.99 148.258 580.863 147.71 585.718 146.614C590.573 145.518 594.253 144.343 596.759 143.09L599.343 159.535C596.994 160.787 592.765 162.119 586.657 163.528C580.549 164.938 573.658 165.642 565.984 165.642C556.587 165.642 548.287 164.233 541.083 161.414C534.035 158.438 528.162 154.445 523.464 149.433C518.765 144.421 515.241 138.47 512.892 131.579C510.543 124.531 509.368 116.936 509.368 108.792C509.368 99.0817 510.856 90.6246 513.832 83.4204C516.808 76.2161 520.723 70.2648 525.578 65.5664C530.433 60.868 535.914 57.3442 542.022 54.995C548.13 52.6458 554.395 51.4712 560.816 51.4712V51.4712ZM587.127 97.9854C587.127 88.7452 584.7 81.4627 579.845 76.1378C574.99 70.6564 568.568 67.9156 560.581 67.9156C556.039 67.9156 551.889 68.777 548.13 70.4998C544.528 72.2225 541.396 74.4934 538.734 77.3124C536.071 80.1315 533.957 83.3421 532.391 86.9442C530.825 90.5463 529.807 94.2267 529.337 97.9854H587.127Z"
          fill={primaryColor}
        />
      </g>
    </svg>
  )
}
